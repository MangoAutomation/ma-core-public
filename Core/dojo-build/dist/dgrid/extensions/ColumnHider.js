//>>built
define("dgrid/extensions/ColumnHider","dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),function(q,h,g,l,d,r){var m,k,n=h("ie"),p=n&&h("quirks"),s=8>n||p?"htmlFor":"for";return q(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:r,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var b=this.subRows,a=!0,c,e,f,d;delete this._columnHiderFirstCheckbox;
f=0;for(c=b.length;f<c;f++){d=0;for(e=b[f].length;d<e;d++)this._renderHiderMenuEntry(b[f][d]),a&&(a=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[b[f][d].id])}},_renderHiderMenuEntry:function(b){var a=b.id,c,e,f;b.hidden&&this._hideColumn(a);b.unhidable||(c=d("div.dgrid-hider-menu-row"),e=this.domNode.id+"-hider-menu-check-"+a,this._columnHiderCheckboxes[a]=f=d(c,"input#"+e+".dgrid-hider-menu-check.hider-menu-check-"+a+"[type\x3dcheckbox]"),d(c,"label.dgrid-hider-menu-label.hider-menu-label"+
a+"["+s+"\x3d"+e+"]",b.label||b.field||""),d(this.hiderMenuNode,c),b.hidden||(f.checked=!0))},renderHeader:function(){var b=this,a=this.hiderMenuNode,c=this.hiderToggleNode,e;this.inherited(arguments);if(a){for(e in this._columnHiderRules)this._columnHiderRules[e].remove();a.innerHTML=""}else c=this.hiderToggleNode=d(this.headerScrollNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton]"),this._listeners.push(g(c,"click",function(a){b._toggleColumnHiderMenu(a)})),a=this.hiderMenuNode=d("div#dgrid-hider-menu-"+
this.id+".dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]"),this._listeners.push(g(a,"keyup",function(a){if(27===(a.charCode||a.keyCode))b._toggleColumnHiderMenu(a),c.focus()})),a.style.display="none",d(this.domNode,a),this._listeners.push(g(a,".dgrid-hider-menu-check:"+(9>n||p?"click":"change"),function(a){b._updateColumnHiddenState(a.target.id.substr(b.id.length+18),!a.target.checked)})),this._listeners.push(g(a,"mousedown",function(a){a.stopPropagation()})),
k||(k=g.pausable(document,"mousedown",function(a){m&&m._toggleColumnHiderMenu(a)}),k.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var b in this._columnHiderRules)this._columnHiderRules[b].remove()},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(){var b=this._hiderMenuOpened,a=this.hiderMenuNode,c=this.domNode,d;a.style.display=b?"none":"";b?a.style.height=
"":(a.offsetHeight>c.offsetHeight-12&&(a.style.height=c.offsetHeight-12+"px"),(d=this._columnHiderFirstCheckbox)&&d.focus());k[b?"pause":"resume"]();m=b?null:this;this._hiderMenuOpened=!b},_hideColumn:function(b){var a="#"+l.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",c;this._columnHiderRules[b]||(this._columnHiderRules[b]=l.addCssRule(a+b,"display: none;"),8===h("ie")&&!h("quirks")&&(c=l.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){c.remove()},0)))},
_updateColumnHiddenState:function(b,a){a?this._hideColumn(b):(this._columnHiderRules[b]&&this._columnHiderRules[b].remove(),delete this._columnHiderRules[b]);this.columns[b].hidden=a;g.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:a,bubbles:!0});this.resize()},toggleColumnHiddenState:function(b,a){"undefined"===typeof a&&(a=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,a);this._columnHiderCheckboxes[b].checked=!a}})});
//@ sourceMappingURL=ColumnHider.js.map