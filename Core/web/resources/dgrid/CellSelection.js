//>>built
define("dgrid/CellSelection","dojo/_base/declare dojo/aspect dojo/on dojo/has ./Selection put-selector/put".split(" "),function(p,r,s,t,q,m){return p(q,{selectionDelegate:".dgrid-cell",_selectionTargetType:"cells",_select:function(a,f,b){var d,e;"undefined"===typeof b&&(b=!0);if("object"!=typeof a||!("element"in a))a=this.cell(a);else if(!a.row){if(b&&"object"===typeof b)for(e in b)this._select(this.cell(a.id,e),null,b[e]);else for(e in this.columns)this._select(this.cell(a.id,e),null,b);return}if(this.allowSelect(a)){var h=
a.row.id,c=this.selection[h];if(a.column){var g=c&&c[a.column.id];null===b&&(b=!g);var k=a.element,c=c||{};c[a.column.id]=b;this.selection[h]=c;var n=!1;for(d in c)if(!0===c[d]){n=!0;break}n||delete this.selection[h];k&&(b?m(k,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):m(k,"!dgrid-selected!ui-state-active"));b!=g&&k&&this._selectionEventQueues[(b?"":"de")+"select"].push(a);if(f)if(f.element||(f=this.cell(f)),!f||!f.row)this._lastSelected=k;else{g=f.element;d=a.element;h=this._determineSelectionDirection(d,
g);h||(g=(f=this.cell(document.getElementById(f.row.element.id),g.columnId))&&f.element,h=this._determineSelectionDirection(d,g));d=a.column.id;var g=f.column.id,l,c=[];for(e in this.columns)if(l&&c.push(e),e==d&&(d=c)||e==g&&(g=c)){c.push(e);if(l||d==c&&e==g)break;l=!0}e=a.row.element;g=f.row.element;do{for(d=0;d<c.length;d++)a=this.cell(e,c[d]),this._select(a,null,b);if(e==g)break}while(e=a.row.element[h])}}else for(d in this.columns)this._select(this.cell(h,d),null,b)}},_determineSelectionDirection:function(){var a=
this.inherited(arguments);return"down"===a?"nextSibling":"up"===a?"previousSibling":a},isSelected:function(a,f){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.cell(a,f));var b=a.row.id;return b in this.selection?!!this.selection[b][a.column.id]:this.allSelected&&(!a.row.data||this.allowSelect(a))},clearSelection:function(a){a=!1;this.inherited(arguments)}})});
//# sourceMappingURL=CellSelection.js.map